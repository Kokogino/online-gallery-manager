<div class="images-list">
  @if (!((images$ | async)?.length > 0) && !(loading$ | async)) {
    <ogm-no-data-message>No images</ogm-no-data-message>
  }
  @for (column of columns; track column; let i = $index) {
    <div class="column">
      @for (image of images$ | async; track image.id; let j = $index; let count = $count) {
        @if (j % columns.length === i) {
          @defer (on viewport) {
            <a [routerLink]="imageDetailsBaseRoute + image.id" class="image-link">
              <ogm-image-thumbnail [image]="image" class="image-thumbnail" (loaded)="loaded(j, count)" />
            </a>
          } @placeholder {
            <div class="placeholder">Loading...</div>
          }
        }
      }
    </div>
  }
</div>

@if (loading$ | async) {
  <mat-progress-bar mode="indeterminate" />
}
